---
interface Props {
	title: string;
	description?: string;
	image?: string;
	type?: string;
}

const { title, description = "Memorial website for Rosemary Jenkins", image = "/images/rosemary-jenkins-memorial-logo.svg", type = "website" } = Astro.props;

const canonicalUrl = `https://www.rosemarymemorial.org${Astro.url.pathname}`;

// Generate breadcrumb data based on current path
const pathSegments = Astro.url.pathname.split('/').filter(segment => segment);
const breadcrumbs = [
  {
    name: "Home",
    url: "https://www.rosemarymemorial.org/"
  }
];

if (pathSegments.length > 0) {
  let currentPath = "https://www.rosemarymemorial.org/";
  for (const segment of pathSegments) {
    currentPath += segment + "/";
    const name = segment.charAt(0).toUpperCase() + segment.slice(1).replace(/-/g, ' ');
    breadcrumbs.push({
      name: name,
      url: currentPath
    });
  }
}
---

<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content={description} />
        <meta name="keywords" content="Rosemary Jenkins, memorial, obituary, education, family, adventure, new port richey, florida, Northwest Elementary, Cypress Elementary, Davenport, Coggon Iowa" />
        <meta name="author" content="" />
        <title>{title} - In Memory of Rosemary Jenkins</title>
        
        <!-- Canonical URL -->
        <link rel="canonical" href={canonicalUrl} />
        
        <!-- Hreflang Tags -->
        <link rel="alternate" hreflang="en" href={canonicalUrl} />
        <link rel="alternate" hreflang="x-default" href={canonicalUrl} />
        
        <!-- DNS Prefetch for Performance -->
        <link rel="dns-prefetch" href="//fonts.googleapis.com" />
        <link rel="dns-prefetch" href="//cdnjs.cloudflare.com" />
        <link rel="dns-prefetch" href="//cdn.jsdelivr.net" />
        <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin />
        <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin />
        
        <!-- Resource Hints -->
        <link rel="preload" href="/css/styles.css" as="style" />
        <link rel="preload" href="/css/custom.css" as="style" />
        
        <!-- Open Graph Meta Tags -->
        <meta property="og:title" content={title} />
        <meta property="og:description" content={description} />
        <meta property="og:image" content={`https://www.rosemarymemorial.org${image}`} />
        <meta property="og:image:width" content="1200" />
        <meta property="og:image:height" content="630" />
        <meta property="og:url" content={canonicalUrl} />
        <meta property="og:type" content={type} />
        <meta property="og:site_name" content="In Memory of Rosemary Jenkins" />
        <meta property="og:locale" content="en_US" />
        
        <!-- Twitter Card Meta Tags -->
        <meta name="twitter:card" content="summary_large_image" />
        <meta name="twitter:title" content={title} />
        <meta name="twitter:description" content={description} />
        <meta name="twitter:image" content={`https://www.rosemarymemorial.org${image}`} />
        <meta name="twitter:image:alt" content={`Rosemary Jenkins - ${title}`} />
        <meta name="twitter:site" content="@dougjenkins" />
        
        <!-- Additional SEO Meta Tags -->
        <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1" />
        <meta name="googlebot" content="index, follow" />
        <meta name="theme-color" content="#343a40" />
        <meta name="msapplication-TileColor" content="#343a40" />
        
        <!-- Language and Region -->
        <meta name="language" content="English" />
        <meta name="geo.region" content="US-FL" />
        <meta name="geo.placename" content="New Port Richey, Florida" />
        <meta name="ICBM" content="28.2428,-82.7201" />
        
        <!-- Structured Data (JSON-LD) -->
        <script type="application/ld+json">
        {`
        {
            "@context": "https://schema.org",
            "@graph": [
                {
                    "@type": "Person",
                    "@id": "https://www.rosemarymemorial.org/#person",
                    "name": "Rosemary Jenkins",
                    "description": "Beloved educator, mother, and grandmother who touched countless lives through her 32-year teaching career",
                    "jobTitle": "Elementary School Teacher",
                    "worksFor": {
                        "@type": "Organization",
                        "name": "Northwest Elementary School"
                    },
                    "alumniOf": "University of Northern Colorado",
                    "knowsAbout": ["Education", "Teaching", "Family", "Adventure"],
                    "birthPlace": "Coggon, Iowa",
                    "deathPlace": "New Port Richey, Florida",
                    "image": "https://www.rosemarymemorial.org/images/rosemary-jenkins-memorial-logo.svg"
                },
                {
                    "@type": "WebSite",
                    "@id": "https://www.rosemarymemorial.org/#website",
                    "name": "In Memory of Rosemary Jenkins",
                    "description": "Memorial website celebrating the life and legacy of Rosemary Jenkins",
                    "url": "https://www.rosemarymemorial.org",
                    "publisher": {
                        "@id": "https://www.rosemarymemorial.org/#person"
                    },
                    "inLanguage": "en-US"
                },
                {
                    "@type": "WebPage",
                    "@id": "${canonicalUrl}#webpage",
                    "url": "${canonicalUrl}",
                    "name": "${title}",
                    "description": "${description}",
                    "isPartOf": {
                        "@id": "https://www.rosemarymemorial.org/#website"
                    },
                    "about": {
                        "@id": "https://www.rosemarymemorial.org/#person"
                    },
                    "inLanguage": "en-US"
                },
                {
                    "@type": "BreadcrumbList",
                    "itemListElement": ${JSON.stringify(breadcrumbs.map((crumb, index) => ({
                        "@type": "ListItem",
                        "position": index + 1,
                        "name": crumb.name,
                        "item": crumb.url
                    })), null, 8)}
                }
            ]
        }
        `}
        </script>
        
        <!-- Favicons -->
        <link rel="icon" type="image/x-icon" href="/favicon/favicon.ico" />
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png" />
        <link rel="icon" type="image/png" sizes="48x48" href="/favicon/favicon-48x48.png" />
        <link rel="icon" type="image/png" sizes="64x64" href="/favicon/favicon-64x64.png" />
        <link rel="icon" type="image/png" sizes="128x128" href="/favicon/favicon-128x128.png" />
        <link rel="icon" type="image/png" sizes="256x256" href="/favicon/favicon-256x256.png" />
        
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="/css/styles.css" rel="stylesheet" />
        <!-- Custom CSS -->
        <link href="/css/custom.css" rel="stylesheet" />
        <!-- Font Awesome -->
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet" />
    </head>
    <body>
        <!-- Responsive navbar-->
        <nav class="navbar navbar-expand-lg">
            <div class="container px-5">
                <a class="navbar-brand d-flex align-items-center" href="/">
                    <img src="/images/rosemary-jenkins-memorial-logo.svg" alt="Rosemary Memorial Logo" class="me-2" width="200" />
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                        <li class="nav-item"><a class="nav-link" href="/">Home</a></li>
                        <li class="nav-item"><a class="nav-link" href="/obituary">Obituary</a></li>
                        <li class="nav-item"><a class="nav-link" href="/education">Education</a></li>
                        <li class="nav-item"><a class="nav-link" href="/family">Family</a></li>
                        <li class="nav-item"><a class="nav-link" href="/adventure">Adventure</a></li>
                        <li class="nav-item"><a class="nav-link" href="/gallery">Gallery</a></li>
                    </ul>
                </div>
            </div>
        </nav>

        <!-- Breadcrumb Navigation -->
        {breadcrumbs.length > 1 && (
            <nav aria-label="breadcrumb" class="bg-light py-2">
                <div class="container px-5">
                    <ol class="breadcrumb mb-0">
                        {breadcrumbs.map((crumb, index) => (
                            <li class={`breadcrumb-item ${index === breadcrumbs.length - 1 ? 'active' : ''}`} 
                                aria-current={index === breadcrumbs.length - 1 ? 'page' : undefined}>
                                {index === breadcrumbs.length - 1 ? (
                                    crumb.name
                                ) : (
                                    <a href={crumb.url}>{crumb.name}</a>
                                )}
                            </li>
                        ))}
                    </ol>
                </div>
            </nav>
        )}

        <slot />

        <!-- Footer-->
        <footer class="py-5 bg-dark">
            <div class="container px-4 px-lg-5">
                <div class="text-center mb-2">
                    <a href="https://www.facebook.com/rosemary.jenkins.547" class="text-white fs-4" target="_blank" rel="noopener noreferrer">
                        <i class="fab fa-facebook"></i>
                    </a>
                </div>
                <p class="m-0 text-center text-white">
                    In Loving Memory of Rosemary Jenkins<br>
                    <small> 2025 by <a href="https://www.dougjenkins.com" class="text-white text-decoration-underline" target="_blank" rel="noopener noreferrer">Doug Jenkins</a></small>
                </p>
            </div>
        </footer>
        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    </body>
</html>
